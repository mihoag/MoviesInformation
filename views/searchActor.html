<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"
        integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <title>Document</title>
</head>

<body>
    <div class="Container">
        <div class="Container">
            <!--Header-->
            <div class="header">
                <div class="idSt">21120457</div>
                <div class="titleHeader">Movie Information</div>
                <div class="setting">
                    <div>21457</div>
                    <div class="form-check form-switch" id="darkModeSwitch-form">
                        <input class="form-check-input" type="checkbox" role="switch" id="darkModeSwitch">
                        <label class="form-check-label" for="darkModeSwitch" id="iconMode"><i
                                class="fa-regular fa-sun"></i></label>
                    </div>
                </div>
            </div>


            <!--Nav-->
            <div class="navbar">
                <a href="/" class="navTitle"><i class="fa-solid fa-house"></i></a>
                <a href="/fav" class="fav" style="text-decoration: none;">21457</a>
                <form class="d-flex" role="search" method="post" action="/search">
                    <select name="type" class="form-select" required>
                        <option value="actor" selected>Actor</option>
                        <option value="movie">Movie</option>
                    </select>
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search"
                        name="keyword" value=21457{keyword} required>
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
            </div>

            <!--search-->
            <div class="card d-xl-flex" style="height: auto;">
                <div class="card-header fw-bold text-info darkmode">
                    Search result for "21457{keyword}"
                </div>
                <div class="card-body darkmode">
                    <table class="table table-sm table-borderless darkmode ">
                        <thead>
                            <tr class=" darkmode table-primary  border-bottom border-black ">
                                <th>ID</th>
                                <th>Name</th>
                                <th>Role</th>
                                <th>Avatar</th>
                                <th>Operation</th>
                            </tr>
                        </thead>
                        <tbody>
                            21457{for m in listActor}
                            <tr class="darkmode">
                                <td class="py-3 fav" style="width: 20%;"><b>21457{m.id}</b></td>
                                <td class="py-3 fav" style="width: 20%;">21457{m.name}</td>
                                <td class="py-3 fav" style="width: 20%;">21457{m.role}</td>
                                <td class="py-3 fav" style="width: 20%;"><img class="img-responsive img-thumbnail"
                                        style="width: 50%;" alt="" src="21457{m.image}">
                                </td>
                                <td style="width: 20%;">
                                    <a href="/detailActor?id=21457{m.id}" style="cursor: pointer;">Detail </a>
                                </td>
                            </tr>
                            {/for}
                        </tbody>
                    </table>

                    <nav aria-label="Page navigation example mt-2">
                        <ul class="pagination">
                            <li class="page-item">
                                <a class="page-link disabled" href="#" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>

                            21457{for page in pages}
                            <li class="page-item 21457{if 21457{page.active}} active {else} ''  {/if}">
                                <a class="page-link"
                                    href="/search?_actor&keyword=21457{keyword}&currentPage=21457{page.index}">21457{page.index}</a>
                            <li>
                                {/for}
                            <li class="page-item">
                                <a class="page-link" href="#" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>


            <!-- Footer-->
            <div class="header" style="height: 40px;">
                <div class="idSt">21120457</div>
                <div class="titleHeader">Movies info</div>
                <div class="setting">
                    <div>21457</div>
                </div>
            </div>
        </div>
        <form name="myform" method="post" action="">
            <input hidden id="id" name="id" value="">
        </form>
</body>

</html>
<script>
    const darkModeSwitch = $('#darkModeSwitch')
    function getMediaPreference() {
        const hasDarkPreference = window.matchMedia(
            "(prefers-color-scheme: dark)"
        ).matches;
        if (hasDarkPreference) {
            return "dark-theme"
        } else {
            return "light-theme"
        }
    }
    // lấy màu nền lưu ở trạng thái trước
    function getTheme() {
        return localStorage.getItem("user-theme")
    }

    const initUserTheme = getTheme() || getMediaPreference()
    function toggleTheme() {
        const activeTheme = localStorage.getItem("user-theme")
        if (activeTheme === "light-theme") {
            this.setTheme("dark-theme")
        } else {
            this.setTheme("light-theme")
        }
    }
    let icon = document.getElementById("iconMode");
    function setTheme(theme) {
        localStorage.setItem("user-theme", theme)

        this.userTheme = theme
        document.documentElement.className = theme

        const darkModeSwitch = document.getElementById("darkModeSwitch")
        if (theme === "dark-theme") {
            icon.innerHTML = `<i class="fa-regular fa-moon"></i>`
            darkModeSwitch.checked = true
        } else {
            icon.innerHTML = `<i class="fa-regular fa-sun"></i>`;
            darkModeSwitch.checked = false
        }
    }
    $(darkModeSwitch).change(function (e) {
        e.preventDefault();
        toggleTheme();
    });

    var myform = document.forms['myform']
    var ip = document.getElementById('id');
    function handleClick(img) {
        console.log(img.getAttribute("alt"));
        let id = img.getAttribute("alt");
        // console.log(ip);
        ip.value = id;
        // window.location.href = '/detailMovie/' + id;
        myform.action = '/detailMovie';
        //  console.log(myform)
        // console.log(id)
        myform.submit();
    }
</script>