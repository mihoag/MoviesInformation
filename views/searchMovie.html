<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"
        integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <title>Document</title>
</head>

<body>

    <div class="Container">
        <!--Header-->
        <div class="header">
            <div class="idSt">21120457</div>
            <div class="titleHeader">Movie Information</div>
            <div class="setting">
                <div>21457</div>
                <div class="form-check form-switch" id="darkModeSwitch-form">
                    <input class="form-check-input" type="checkbox" role="switch" id="darkModeSwitch">
                    <label class="form-check-label" for="darkModeSwitch" id="iconMode"><i
                            class="fa-regular fa-sun"></i></label>
                </div>
            </div>
        </div>


        <!--Nav-->
        <div class="navbar">
            <a href="/" class="navTitle"><i class="fa-solid fa-house"></i></a>
            <a href="/fav" class="fav" style="text-decoration: none;">21457</a>
            <form class="d-flex" role="search" method="post" action="/search">
                <select name="type" class="form-select" required>

                    <option value="actor">Actor</option>
                    <option value="movie" selected>Movie</option>
                </select>
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name="keyword"
                    value="21457{keyword}" required>
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
        </div>
        <!--search-->
        <div class="searchArea card-group d-flex justify-content-center my-4">
            21457{for m in listMovie}
            <div class="col-2 mx-3 my-1">
                <div class="btn p-0 card movie-view-card">
                    <img src="21457{m.image}" class="card-img-top" alt="21457{m.id}" onclick="handleClick(this)">
                    <div class="card-body">
                        <h6 class="card-title text-start overflow-hidden">21457{m.title}</h6>
                        <div style="font-size: 0.7em;" class="card-text">21457{m.year}
                        </div>
                    </div>
                </div>

            </div>
            {/for}
        </div>

        <nav aria-label="Page navigation example mt-2">
            <ul class="pagination">
                <li class="page-item">
                    <a class="page-link disabled" href="#" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>

                21457{for page in pages}
                <li class="page-item 21457{if 21457{page.active}} active {else} ''  {/if}">
                    <a class="page-link"
                        href="/search?_movie&keyword=21457{keyword}&currentPage=21457{page.index}">21457{page.index}</a>
                <li>
                    {/for}
                <li class="page-item">
                    <a class="page-link" href="#" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
        <!--Footer-->
        <div class="header" style="height: 40px;">
            <div class="idSt">21120457</div>
            <div class="titleHeader">Movies info</div>
            <div class="setting">
                <div>21457</div>
            </div>
        </div>
    </div>
    <form name="myform" method="post" action="">
        <input hidden id="id" name="id" value="">
    </form>
</body>

</html>
<script>
    const darkModeSwitch = $('#darkModeSwitch')
    function getMediaPreference() {
        const hasDarkPreference = window.matchMedia(
            "(prefers-color-scheme: dark)"
        ).matches;
        if (hasDarkPreference) {
            return "dark-theme"
        } else {
            return "light-theme"
        }
    }
    // lấy màu nền lưu ở trạng thái trước
    function getTheme() {
        return localStorage.getItem("user-theme")
    }
    let icon = document.getElementById("iconMode");
    function setTheme(theme) {
        localStorage.setItem("user-theme", theme)

        this.userTheme = theme
        document.documentElement.className = theme

        const darkModeSwitch = document.getElementById("darkModeSwitch")
        if (theme === "dark-theme") {
            icon.innerHTML = `<i class="fa-regular fa-moon"></i>`
            darkModeSwitch.checked = true
        } else {
            icon.innerHTML = `<i class="fa-regular fa-sun"></i>`;
            darkModeSwitch.checked = false
        }
    }
    const initUserTheme = getTheme() || getMediaPreference()
    setTheme(initUserTheme)
    function toggleTheme() {
        const activeTheme = localStorage.getItem("user-theme")
        if (activeTheme === "light-theme") {
            this.setTheme("dark-theme")
        } else {
            this.setTheme("light-theme")
        }
    }
    $(darkModeSwitch).change(function (e) {
        e.preventDefault();
        toggleTheme();
    });

    var myform = document.forms['myform']
    var ip = document.getElementById('id');
    function handleClick(img) {
        console.log(img.getAttribute("alt"));
        let id = img.getAttribute("alt");
        // console.log(ip);
        ip.value = id;
        // window.location.href = '/detailMovie/' + id;
        myform.action = '/detailMovie';
        //  console.log(myform)
        // console.log(id)
        myform.submit();
    }
</script>